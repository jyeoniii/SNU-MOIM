<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<br><br>
<button *ngIf="loginedUser" (click)="signOut()" class="btn btn-primary btn-primary"
        style="float:right; margin-right: 5%;">SignOut</button>
<br>
<h2 class="text-center">View Profile</h2>

<div *ngIf="user">
  <div *ngIf="user.token_expired" class="col-sm-offset-3 col-sm-6 alert alert-danger" role="alert">
    <div style="text-align: center;">
      It seems your Facebook access token is expired.<br>
      If you don't renew your token, your friends status will not be updated.<br>
      Please <a href="/oauth/login/facebook/" class="alert-link">click here to log in to Facebook</a> again.
    </div>
  </div>

  <form class="form-horizontal">
    <div class="form-group">
      <label class="col-sm-6 control-label">mySNU ID</label>
      <div class="col-sm-6">
        <p class="form-control-static">{{user.username}}</p>
      </div>
    </div>
  </form>

  <form class="form-horizontal">
    <div class="form-group">
      <label class="col-sm-6 control-label">Name</label>
      <div class="col-sm-6">
        <p class="form-control-static">{{user.name}}</p>
      </div>
    </div>
  </form>

  <form class="form-horizontal">
    <div class="form-group">
      <label class="col-sm-6 control-label">College</label>
      <div class="col-sm-6">
        <p class="form-control-static">{{user.college.name}}</p>
      </div>
    </div>
  </form>

  <form class="form-horizontal">
    <div class="form-group">
      <label class="col-sm-6 control-label">Interest</label>
      <div class="col-sm-2">
        <div *ngFor="let subject of user.subjects">
          <li class="list-group-item">
            {{subject.name}}
          </li>
        </div>
      </div>
    </div>
  </form>

  <br>

  <div *ngIf="status === 0"> <!-- Logged in user is on their own profile page -->
    <button class="col-sm-offset-5 col-sm-2 btn btn-primary" (click)="editProfile()">Edit Profile</button>
    <br><br>
    <a href="/oauth/login/facebook/"> <!-- Show Facebook Connect Button -->
      <button *ngIf="!loginedUser.fb_connected" class="col-sm-offset-5 col-sm-2 btn btn-primary">Connect to Facebook</button>
    </a>
  </div>

  <div *ngIf="status === 1"> <!-- Facebook friend -->
    <h4 class="text-center"><u>You're a friend with this user!</u></h4>
  </div>

  <div *ngIf="status === 2"> <!-- Show mutual friends -->
    <div *ngIf="mutualFriends.length === 0">
      <h4 class="text-center">There's no mutual friends between you and this user.</h4>
    </div>
    <div *ngIf="mutualFriends.length > 0">
      <h4 class="text-center"><u>Mutual friends between you and this user</u></h4>
      <div class="col-sm-offset-4 col-sm-4">
        <div *ngFor="let friend of mutualFriends">
          <li class="list-group-item" style="text-align: center;">
            {{friend.name}} (username: {{friend.username}})
          </li>
        </div>
      </div>
    </div>
  </div>


